# 추론 시간 비교 분석

## 데이터 요약

### 1. 단독 실행 (Validation_alone_withoutval)
- 각 모델이 순차적으로 단독 실행
- GPU 리소스를 독점적으로 사용

### 2. 함께 실행 - MPS 사용 (Validation_together_withoutval/usingMPS1_VstatTegre)
- 5개 모델이 동시에 실행
- MPS (Multi-Process Service) 사용

### 3. 함께 실행 - MPS 미사용 (Validation_together_withoutval/withoutMPS1_VstatTegre)
- 5개 모델이 동시에 실행
- MPS 미사용

## 추론 시간 비교표 (평균 이미지당 시간, ms)

| 모델 | 단독 실행 | 함께 실행 (MPS) | 함께 실행 (No MPS) | MPS 대비 차이 | No MPS 대비 차이 |
|------|----------|----------------|-------------------|--------------|-----------------|
| **yolo11n-cls** | 11.213 | 11.788 | 11.168 | +5.1% | -0.4% |
| **yolo11n-detect** | 27.433 | 29.807 | 64.089 | +8.6% | +133.6% |
| **yolo11n-pose** | 29.221 | 26.340 | 44.446 | -9.9% | +52.2% |
| **yolo11n-seg** | 35.029 | 31.779 | 63.961 | -9.3% | +82.6% |
| **yolo11n-obb** | 56.546 | 56.702 | 63.807 | +0.3% | +12.8% |

## 전체 추론 시간 비교 (100개 이미지, 초)

| 모델 | 단독 실행 | 함께 실행 (MPS) | 함께 실행 (No MPS) | MPS 대비 차이 | No MPS 대비 차이 |
|------|----------|----------------|-------------------|--------------|-----------------|
| **yolo11n-cls** | 1.121 | 1.179 | 1.117 | +5.2% | -0.4% |
| **yolo11n-detect** | 2.743 | 2.981 | 6.409 | +8.7% | +133.6% |
| **yolo11n-pose** | 2.922 | 2.634 | 4.445 | -9.9% | +52.2% |
| **yolo11n-seg** | 3.503 | 3.178 | 6.396 | -9.3% | +82.6% |
| **yolo11n-obb** | 5.655 | 5.670 | 6.381 | +0.3% | +12.8% |

## 주요 경향성 분석

### 1. MPS 사용 시 성능 (함께 실행 vs 단독 실행)

#### 성능 향상 모델
- **yolo11n-pose**: 9.9% 빨라짐 (29.221ms → 26.340ms)
- **yolo11n-seg**: 9.3% 빨라짐 (35.029ms → 31.779ms)

#### 성능 저하 모델
- **yolo11n-detect**: 8.6% 느려짐 (27.433ms → 29.807ms)
- **yolo11n-cls**: 5.1% 느려짐 (11.213ms → 11.788ms)
- **yolo11n-obb**: 거의 동일 (56.546ms → 56.702ms)

**분석**: MPS를 사용하면 일부 모델(pose, seg)은 성능이 향상되지만, 다른 모델(detect, cls)은 약간 저하됩니다. 이는 MPS의 컨텍스트 스위칭 오버헤드와 모델별 특성 차이로 인한 것으로 보입니다.

### 2. MPS 미사용 시 성능 (함께 실행 vs 단독 실행)

#### 심각한 성능 저하
- **yolo11n-detect**: 133.6% 느려짐 (27.433ms → 64.089ms) ⚠️
- **yolo11n-seg**: 82.6% 느려짐 (35.029ms → 63.961ms) ⚠️
- **yolo11n-pose**: 52.2% 느려짐 (29.221ms → 44.446ms) ⚠️
- **yolo11n-obb**: 12.8% 느려짐 (56.546ms → 63.807ms)
- **yolo11n-cls**: 거의 동일 (11.213ms → 11.168ms)

**분석**: MPS 없이 여러 모델을 동시에 실행하면 GPU 리소스 경쟁으로 인해 대부분의 모델에서 심각한 성능 저하가 발생합니다. 특히 detect, seg, pose 모델은 2배 이상 느려집니다.

### 3. 모델별 특성

#### 경량 모델 (yolo11n-cls)
- **특징**: 가장 빠른 추론 시간 (~11ms)
- **경향**: 동시 실행 시에도 성능 영향이 거의 없음
- **이유**: 연산량이 적어 리소스 경쟁 영향이 미미함

#### 중간 복잡도 모델 (yolo11n-detect, yolo11n-pose, yolo11n-seg)
- **특징**: 중간 수준의 추론 시간 (27-35ms)
- **경향**: MPS 사용 시 pose와 seg는 성능 향상, detect는 약간 저하
- **이유**: 모델별 GPU 연산 패턴 차이로 인한 MPS 최적화 효과 차이

#### 고복잡도 모델 (yolo11n-obb)
- **특징**: 가장 느린 추론 시간 (~57ms)
- **경향**: MPS 사용 시 성능 변화가 거의 없음
- **이유**: 이미 연산량이 많아 병렬 실행의 이점/단점이 상쇄됨

## 결론 및 권장사항

### 1. 단독 실행 vs 함께 실행
- **단독 실행**: 각 모델이 최적 성능을 보장
- **함께 실행 (MPS)**: 전체 처리 시간은 단축되지만, 개별 모델 성능은 모델에 따라 다름
- **함께 실행 (No MPS)**: 심각한 성능 저하로 비권장

### 2. MPS 사용 효과
- **장점**: 
  - pose, seg 모델에서 성능 향상
  - GPU 리소스 공유로 전체 처리 시간 단축 가능
- **단점**:
  - detect, cls 모델에서 약간의 성능 저하
  - 컨텍스트 스위칭 오버헤드

### 3. 실무 적용 시나리오
- **실시간 추론이 중요한 경우**: 단독 실행 권장
- **배치 처리 시**: MPS 사용으로 전체 처리 시간 단축 가능
- **MPS 미사용 동시 실행**: 절대 비권장 (성능 저하가 너무 큼)

### 4. 모델별 우선순위
1. **yolo11n-cls**: 동시 실행 영향이 거의 없어 유연하게 사용 가능
2. **yolo11n-pose, yolo11n-seg**: MPS 사용 시 오히려 성능 향상
3. **yolo11n-detect**: MPS 사용 시 약간의 성능 저하, No MPS 시 심각한 저하
4. **yolo11n-obb**: 이미 느려서 동시 실행의 이점이 제한적

